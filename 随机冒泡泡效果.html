<!--
 * @Autor: ErioY
 * @Date: 2019-10-01 15:44:30
 * @Email: 1973545559@qq.com
 * @Github: https://github.com/ErioY
 * @LastEditors: ErioY
 * @LastEditTime: 2019-10-01 16:25:31
 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    div {
        width: 1px;
        height: 1px;
        position: fixed;
        border-radius: 50%;
    }
    </style>
</head>
<body>
    <button id="start">开始</button>
    <button id="stop">停止</button>
    <script src = "jquery-1.10.1.min.js"></script>
    <script src = "velocity.min.js"></script>
    <script>
    // 随机位置
    var clientHeight = document.documentElement.clientHeight;
    var clientWidth = document.documentElement.clientWidth;
    var timer = null;
    $("button").eq(0).click(function () {
        timer = setInterval(makeRandom, 600);
    });

    $("button").eq(1).click(function () {
       clearInterval(timer); 
    });
    
    function makeRandom () {
        // 5-10个随机div
        var length = Math.round(Math.random() * (10 - 5) + 5);
        for (var i = 0; i < length; i++) {
            var oDiv = $("<div>").appendTo($("body"));
            // 随机颜色
            var r = parseInt(Math.random() * 255);
            var g = parseInt(Math.random() * 255);
            var b = parseInt(Math.random() * 255);
            // 随机位置
            var divT = Math.random() * clientHeight;
            var divL = Math.random() * clientWidth;
            oDiv.css({
                "backgroundColor": "rgb(" + r + "," + g + "," + b + ")",
                "top": divT,
                "left": divL
            }).velocity({
                "scaleX": 150,
                "scaleY": 150,
                "backgroundColorAlpha": 0
            }, {
                "duration": 1000, 
                "complete": function () {
                    $(this).remove(); // 删除对应的元素
                }
            });
        }
    }
    </script>
</body>
</html>